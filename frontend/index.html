<!DOCTYPE html>
<html lang="en">
<head>
    <title>NDAI</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!--    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
          crossorigin="anonymous">
</head>
<body id='app' class="p-4">
<nav class="navbar navbar-light bg-light">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">nd.ai</span>
    </div>
</nav>
<div class="container" style="width: 540px;">
    <h3>1. Choose your NDA</h3>
    <form class="mb-3" id="formUpload">
        <label for="fileUpload" class="form-label">Upload file (.pdf)</label>
        <input class="form-control" type="file" id="fileUpload">


        <input class="form-input" type="text" id="governingLaw" value="czech" />
        <button type="submit" class="btn btn-outline-info mt-4">Submit</button>
    </form>

    Inputy viz https://docs.google.com/document/d/1zysN5Z3ZL96TdAv0uiTMxMJPgp_zVIBqQqBLULZ_0T4/edit
    governingLaw select
    term number

    <h3>2. Output from the bot:</h3>
    <div id="output" class="mb-4">
    </div>
</div>
</body>

<script>
  const formUpload = document.getElementById('formUpload');

  const API_URL = 'http://' + window.location.hostname + ':4000';

  formUpload.addEventListener('submit', event => {
    event.preventDefault();

    const file = document.getElementById("fileUpload").files[0];
    const governingLaw = document.getElementById("governingLaw").value;

    const formData = new FormData();
    formData.append("nda", file);
    formData.append('governingLaw', governingLaw);

    const input = {
      method: 'POST',
      body: formData,
    };
    console.log(input)
    fetch(API_URL + '/api/nda/analyze', input)
      .then((response) => response.json())
      .then((data) => {
        console.log("out:", data);
        if (data.error) {
          alert(data.error);
        } else {
          document.getElementById('output').innerHTML = JSON.stringify(data);
        }
      })
      .catch(error => {
        console.error(error);
      });
  });
</script>

</html>
